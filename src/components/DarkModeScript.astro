<script is:inline>
  function applyTheme(theme) {
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
  }

  document.addEventListener("click", function (e) {
    const toggleButton = e.target.closest("[data-toggle-color-scheme]");
    if (toggleButton) {
      document.documentElement.classList.toggle("dark");
      localStorage.theme = document.documentElement.classList.contains("dark")
        ? "dark"
        : "light";
    }
  });

  applyTheme(localStorage.theme || "light");
  
  document.addEventListener("astro:after-swap", () =>
    applyTheme(localStorage.theme || "light"),
  );
</script>
